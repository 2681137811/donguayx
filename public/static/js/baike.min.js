!function(a,b,c,d){function e(a,b,c){var d=new RegExp("{"+b+"}","g");for(var f in a)"object"==typeof a[f]?a[f]=e(a[f],b,c):"string"==typeof a[f]&&(a[f]=a[f].replace(d,c));return a}var f={render:function(b,c){this.dom=a(b),this.info=c;var d="                <div class='icoBox'>                    <div class='icoDtl'><div class='icoDtlBox'></div></div>                    <div class='icoDir'></div>                    <div class='icoScr'></div>                </div>            ";if(this.dom.addClass("icoHome").append(d),this.dtl=this.dom.find(".icoDtlBox").first(),this.dir=this.dom.find(".icoDir").first(),this.scr=this.dom.find(".icoScr").first(),!a.isEmptyObject(this.info.head.template))for(var f in this.info.head.template)this.info.list=e(this.info.list,f,this.info.head.template[f]);if(!a.isEmptyObject(this.info.head.tag)){var g=new Array;for(var f in this.info.head.tag[0])g[f]=new Array;for(var f in this.info.list)g[parseInt(this.info.list[f].tag[0])].push(this.info.list[f]);this.info.list=[];for(var h in g)for(var i in g[h]){var j="";for(var k in g[h][i].tag)j+=" "+g[h][i].tag[k];g[h][i].tag=j,this.info.list.push(g[h][i])}}var d="";if(this.info.skillbar=[],d+="<h2 class='item-title'></h2>",d+="<img class='item-image ico-large'><br>",!a.isEmptyObject(this.info.head.skillbar))for(var f in this.info.head.skillbar)this.info.skillbar.push(this.info.head.skillbar[f].reference),d+="                            <div id ='skillBar-"+f+"' class='skillBar'>                                <ul class='skillBox'>                                    <li class='skillName'>"+this.info.head.skillbar[f].name+"</li>                                    <li class='skillGraph'><span><i class='skillPoint' style='background-color:"+this.info.head.skillbar[f].color+";'></i></span></li>                                    <li class='skillValue'></li>                                </ul>                            </div>                        ";d+="<div class='item-content'></div>",this.dtl.append(d);var d="",d="";for(var f in this.info.list)d+="<li icoid='"+f+"' class='item"+this.info.list[f].tag+"' title='"+this.info.list[f].name+"'>                        <a>                            <img data-original='"+this.info.list[f].image+"' alt='"+this.info.list[f].name+"'>                            <h6>"+this.info.list[f].name+"</h6>                        </a>                    </li>";this.dir.append(d),this.dir.find("img").lazyload({effect:"fadeIn",placeholder:"http://t.donguayx.com/empty_95.png"});for(var f in this.info.head.tag[0])this.dir.find(".0"+f).first().before("<h2>"+this.info.head.tag[0][f]+"</h2>");this.bindClick()},bindClick:function(){this.dtl.title=this.dtl.find(".item-title"),this.dtl.img=this.dtl.find(".item-image"),this.dtl.skillbar=this.dtl.find(".skillBar"),this.dtl.content=this.dtl.find(".item-content"),f.checkDetail(0),this.dir.find(".item").on("click",function(){f.checkDetail(a(this).attr("icoid"))}),this.dtl.hmFixedTop({startAdjust:20,endAdjust:20,topAdjust:20,bottomAdjust:20,resize:!0})},checkDetail:function(a){a&&!isNaN(a)||(a=0),this.dtl.title.html(this.info.list[a].name),this.dtl.img.attr("src",this.info.list[a].image);for(var b in this.info.list[a].skillbar)"number"!=typeof this.info.list[a].skillbar[b]||null===this.info.list[a].skillbar[b]?(this.dtl.skillbar.eq(b).find(".skillPoint").css("width","0"),this.dtl.skillbar.eq(b).find(".skillValue").html("-")):(this.dtl.skillbar.eq(b).find(".skillValue").html(this.info.list[a].skillbar[b]),this.info.list[a].skillbar[b]<=this.info.skillbar[b]&&this.info.list[a].skillbar[b]>0?this.dtl.skillbar.eq(b).find(".skillPoint").css("width",this.info.list[a].skillbar[b]/this.info.skillbar[b]*100+"%"):this.info.list[a].skillbar[b]>this.info.skillbar[b]?this.dtl.skillbar.eq(b).find(".skillPoint").css("width","100%"):this.dtl.skillbar.eq(b).find(".skillPoint").css("width","0"));this.dtl.content.html(this.info.list[a].content)}};b.icoBox=f}(jQuery,window,document),function(a,b,c,d){function e(a,b,c){var d=new RegExp("{"+b+"}","g");for(var f in a)"object"==typeof a[f]?a[f]=e(a[f],b,c):"string"==typeof a[f]&&(a[f]=a[f].replace(d,c));return a}function f(a,b){for(var c in a)if(a[c]==b)return!0;return!1}var c=b.document,g=b.location,h=function(){};h.sign=function(){h.sign.init.done||h.sign.init(a(".dg-sign:first")),h.sign.viewchange(),h.sign.verifycode(),h.sign.dom.$main.fadeIn("200"),c.body.style.overflow="hidden"},h.sign.bind=function(b){a(b).bind("click",h.sign)},h.sign.close=function(){h.sign.dom.$main.fadeOut("200",function(){c.body.style.overflow="visible"})},h.sign.init=function(b){var c={$main:b};c.$changeBtn=a("#tag-login,#tag-signup",c.$main),c.$signGroup=a("#dg-login,#dg-signup",c.$main),c.$verify=a("input[name=verify]",c.$signGroup),c.$verifyPic=a(".verify-pic img",c.$signGroup),a(".dg-sign-close",c.$main).click(h.sign.close);for(var d=0;d<c.$changeBtn.length;d++)c.$changeBtn.eq(d).click({eq:d},function(a){h.sign.viewchange(a.data.eq)});a(".sign-submit",c.$main).click(function(){var a=this.id.split("-")[0];h.sign.verify(a)}),c.$verifyPic.click(h.sign.verifycode),h.sign.dom=c,h.sign.init.done=!0},h.sign.viewchange=function(a){var b=h.sign.dom.$changeBtn,c=h.sign.dom.$signGroup;a||(a=0),b.eq(a).hasClass("focus")||(b.removeClass("focus").eq(a).addClass("focus"),c.hide().eq(a).fadeIn("200"))},h.sign.verify=function(b){var d={type:b},e="warning",f=c.forms[b];return d.username=f.username.value,d.password=f.password.value,d.verify=f.verify.value,"signup"==b&&(d.password_2=f.password_2.value),"login"!=b&&"signup"!=b?void hm.mb("未知错误",e):""==d.username?void hm.mb("请填写您的用户名",e):d.username.length<4||d.username.length>20?void hm.mb("用户名格式错误",e):""==d.password?void hm.mb("请填写您的密码",e):d.password.length<6||d.password.length>20?void hm.mb("密码格式错误",e):""==d.verify?void hm.mb("请填写验证码",e):""==d.verify||d.verify.length<4?void hm.mb("验证码填写错误",e):("login"==b&&(d.password=a.md5(d.password)),"signup"==b&&d.password!=d.password_2?void hm.mb("两次输入的密码不一样","warning"):void h.sign.request(d))},h.sign.verifycode=function(){h.sign.dom.$verifyPic.attr("src","/verify?r="+Math.random()),h.sign.dom.$verify.val("")},h.sign.request=function(b){a.ajax({type:"post",url:"/user",data:b,dataType:"json",success:function(a){1==a.status?(hm.mb(a.info),h.sign.callback()):0==a.status&&(hm.mb(a.info,"danger"),h.sign.verifycode())},error:function(){hm.mb("操作失败，请检查网络。")}})},h.sign.callback=function(){h.sign.dom.$signGroup[0].reset(),h.sign.dom.$signGroup[1].reset(),setTimeout(function(){g.reload(!0)},1e3)},h.comments=function(b){h.comments.init.done||(h.comments.init(a("#test")),h.comments.id=b),h.comments.request()},h.comments.init=function(a){a.append("            <div class='dg-post-reply'>                <div class='textarea'><textarea cols='1' placeholder='请自留下你的评论吧。'></textarea></div>                <div class='menu'>                    <a class='face'>表情</a>                    <a class='submit'>提交</a>                    <span class='message'>Ctrl + Enter</span>                </div>            </div>        "),a.append("<ul class='dg-post-list'>还没有任何评论</ul>"),h.comments.init.done=!0},h.comments.request=function(b){var c={type:"get",page:"1",cid:"1"};a.ajax({type:"get",url:"/comments",data:c,dataType:"json",success:function(a){hm.showObj(a)},error:function(){hm.mb("操作失败，请检查网络。")}})},h.article=function(){},h.article.render=function(b){function c(b){var d="";for(var h in b)a.isArray(b[h])?d+=c(b[h]):"object"==typeof b[h]?f(g,b[h].html)&&(d+=e(b[h])):d+=b[h];return d}function e(b){if("br"==b.html||"hr"==b.html)return"<"+b.html+">";var e="",f="";for(var g in b.attr)e+=" "+g+'="'+b.attr[g]+'"';return b.content!==d&&(f=a.isArray(b.content)?c(b.content):b.content),"<"+b.html+e+">"+f+"</"+b.html+">"}var g=["h1","h2","h3","h4","h5","h6","p","img","blockquote","pre","div","br","hr"];return mark_diy={response:function(a){}},c(b)},h.article.template=function(a,b,c){return e(a,b,c)},b.donguayx=b.dg=h}(jQuery,window,document),function(a){var b=function(a,b){return a<<b|a>>>32-b},c=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},d=function(a,b,c){return a&b|~a&c},e=function(a,b,c){return a&c|b&~c},f=function(a,b,c){return a^b^c},g=function(a,b,c){return b^(a|~c)},h=function(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)},i=function(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)},j=function(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)},k=function(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)},l=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},m=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},n=function(a){a=a.replace(/\x0d\x0a/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b};a.extend({md5:function(a){var b,d,e,f,g,o,p,q,r,s=Array(),t=7,u=12,v=17,w=22,x=5,y=9,z=14,A=20,B=4,C=11,D=16,E=23,F=6,G=10,H=15,I=21;for(a=n(a),s=l(a),o=1732584193,p=4023233417,q=2562383102,r=271733878,b=0;b<s.length;b+=16)d=o,e=p,f=q,g=r,o=h(o,p,q,r,s[b+0],t,3614090360),r=h(r,o,p,q,s[b+1],u,3905402710),q=h(q,r,o,p,s[b+2],v,606105819),p=h(p,q,r,o,s[b+3],w,3250441966),o=h(o,p,q,r,s[b+4],t,4118548399),r=h(r,o,p,q,s[b+5],u,1200080426),q=h(q,r,o,p,s[b+6],v,2821735955),p=h(p,q,r,o,s[b+7],w,4249261313),o=h(o,p,q,r,s[b+8],t,1770035416),r=h(r,o,p,q,s[b+9],u,2336552879),q=h(q,r,o,p,s[b+10],v,4294925233),p=h(p,q,r,o,s[b+11],w,2304563134),o=h(o,p,q,r,s[b+12],t,1804603682),r=h(r,o,p,q,s[b+13],u,4254626195),q=h(q,r,o,p,s[b+14],v,2792965006),p=h(p,q,r,o,s[b+15],w,1236535329),o=i(o,p,q,r,s[b+1],x,4129170786),r=i(r,o,p,q,s[b+6],y,3225465664),q=i(q,r,o,p,s[b+11],z,643717713),p=i(p,q,r,o,s[b+0],A,3921069994),o=i(o,p,q,r,s[b+5],x,3593408605),r=i(r,o,p,q,s[b+10],y,38016083),q=i(q,r,o,p,s[b+15],z,3634488961),p=i(p,q,r,o,s[b+4],A,3889429448),o=i(o,p,q,r,s[b+9],x,568446438),r=i(r,o,p,q,s[b+14],y,3275163606),q=i(q,r,o,p,s[b+3],z,4107603335),p=i(p,q,r,o,s[b+8],A,1163531501),o=i(o,p,q,r,s[b+13],x,2850285829),r=i(r,o,p,q,s[b+2],y,4243563512),q=i(q,r,o,p,s[b+7],z,1735328473),p=i(p,q,r,o,s[b+12],A,2368359562),o=j(o,p,q,r,s[b+5],B,4294588738),r=j(r,o,p,q,s[b+8],C,2272392833),q=j(q,r,o,p,s[b+11],D,1839030562),p=j(p,q,r,o,s[b+14],E,4259657740),o=j(o,p,q,r,s[b+1],B,2763975236),r=j(r,o,p,q,s[b+4],C,1272893353),q=j(q,r,o,p,s[b+7],D,4139469664),p=j(p,q,r,o,s[b+10],E,3200236656),o=j(o,p,q,r,s[b+13],B,681279174),r=j(r,o,p,q,s[b+0],C,3936430074),q=j(q,r,o,p,s[b+3],D,3572445317),p=j(p,q,r,o,s[b+6],E,76029189),o=j(o,p,q,r,s[b+9],B,3654602809),r=j(r,o,p,q,s[b+12],C,3873151461),q=j(q,r,o,p,s[b+15],D,530742520),p=j(p,q,r,o,s[b+2],E,3299628645),o=k(o,p,q,r,s[b+0],F,4096336452),r=k(r,o,p,q,s[b+7],G,1126891415),q=k(q,r,o,p,s[b+14],H,2878612391),p=k(p,q,r,o,s[b+5],I,4237533241),o=k(o,p,q,r,s[b+12],F,1700485571),r=k(r,o,p,q,s[b+3],G,2399980690),q=k(q,r,o,p,s[b+10],H,4293915773),p=k(p,q,r,o,s[b+1],I,2240044497),o=k(o,p,q,r,s[b+8],F,1873313359),r=k(r,o,p,q,s[b+15],G,4264355552),q=k(q,r,o,p,s[b+6],H,2734768916),p=k(p,q,r,o,s[b+13],I,1309151649),o=k(o,p,q,r,s[b+4],F,4149444226),r=k(r,o,p,q,s[b+11],G,3174756917),q=k(q,r,o,p,s[b+2],H,718787259),p=k(p,q,r,o,s[b+9],I,3951481745),o=c(o,d),p=c(p,e),q=c(q,f),r=c(r,g);var J=m(o)+m(p)+m(q)+m(r);return J.toLowerCase()}})}(jQuery);